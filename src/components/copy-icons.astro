---
interface Props {
  link: string;
};

const {link} = Astro.props as Props;
---

<svg
    id="copy-white-icon"
    width="21"
    height="24"
    viewBox="0 0 21 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    class="cursor-pointer"
>
    <path
        class="copy-white-icon"
        d="M2.00535 24C1.46535 24 0.997021 23.8017 0.600361 23.405C0.203701 23.0083 0.00537109 22.54 0.00537109 22V4.34001H2.00535V22H15.8854V24H2.00535ZM6.00534 20C5.46534 20 4.99701 19.8017 4.60035 19.405C4.20369 19.0084 4.00536 18.54 4.00536 18.0001V2.00001C4.00536 1.46001 4.20369 0.991679 4.60035 0.59502C4.99701 0.19834 5.46534 0 6.00534 0H18.4054C18.9454 0 19.4137 0.19834 19.8104 0.59502C20.207 0.991679 20.4054 1.46001 20.4054 2.00001V18.0001C20.4054 18.54 20.207 19.0084 19.8104 19.405C19.4137 19.8017 18.9454 20 18.4054 20H6.00534ZM6.00534 18.0001H18.4054V2.00001H6.00534V18.0001Z"
        fill="#3C4043"></path>
</svg>
<svg
    id="copy-black-icon"
    width="21"
    height="24"
    viewBox="0 0 21 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    class="hidden"
>
    <path
        class="copy-black-icon"
        d="M1.99998 24C1.45998 24 0.99165 23.8017 0.59499 23.405C0.19833 23.0083 0 22.54 0 22V4.34001H1.99998V22H15.88V24H1.99998ZM5.99997 20C5.45997 20 4.99164 19.8017 4.59498 19.405C4.19832 19.0084 3.99999 18.54 3.99999 18.0001V2.00001C3.99999 1.46001 4.19832 0.991679 4.59498 0.59502C4.99164 0.19834 5.45997 0 5.99997 0H18.4C18.94 0 19.4083 0.19834 19.805 0.59502C20.2017 0.991679 20.4 1.46001 20.4 2.00001V18.0001C20.4 18.54 20.2017 19.0084 19.805 19.405C19.4083 19.8017 18.94 20 18.4 20H5.99997Z"
        fill="#3C4043"></path>
</svg>
<input id="copy-portfolio-link" type="hidden" value={link} />

<style>
    :global(.dark) .copy-white-icon {
        fill: #e9e9e9;
    }
    :global(.dark) .copy-black-icon {
        fill: #e9e9e9;
    }
</style>

<script>
    const copyWhite = document.querySelector(
        "#copy-white-icon",
    ) as SVGSVGElement;
    const copyBlack = document.querySelector(
        "#copy-black-icon",
    ) as SVGSVGElement;
    const showSuccessfullyCopied = document.querySelector(
        "#successfully-copied",
    ) as HTMLDivElement;
    const copyPortfolioLink = document.querySelector(
        "#copy-portfolio-link",
    ) as HTMLInputElement;

    const copyIconToggler = () => {
        copyWhite.classList.toggle("hidden");
        copyBlack.classList.remove("hidden");
        showSuccessfullyCopied.classList.toggle("invisible");

        if (copyPortfolioLink.value !== null) {
            navigator.clipboard.writeText(copyPortfolioLink.value).then(() => {
                setTimeout(() => {
                    copyWhite.classList.remove("hidden");
                    copyBlack.classList.add("hidden");
                    showSuccessfullyCopied.classList.toggle("invisible");
                }, 2000);
            });
        }
    };
    copyWhite && copyWhite.addEventListener("click", copyIconToggler);
</script>
